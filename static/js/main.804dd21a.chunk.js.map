{"version":3,"sources":["utils/UtilsDate.js","utils/UtilsVenta.js","components/SearchBoxProducts.js","components/SearchBoxRooms.js","utils/UtilsRooms.js","utils/UtilsDB.js","components/AnullareBtn.js","components/ConfermaBtn.js","utils/UtilsProducts.js","components/PagareBtn.js","pages/Ventas.js","utils/UtilsQuantity.js","pages/Inicio.js","pages/Login.js","components/SalvaBtn.js","components/CancellareBtn.js","pages/CRMProducts.js","RouterPath.js","App.js","reportWebVitals.js","index.js"],"names":["formatDate","date","getDate","getMonth","getYear","getVentasByRoom","numeroRoom","ventas","filter","venta","numeroHabitacion","cancelado","pagado","createVentaObjeto","roomNumber","productName","productPrice","productQuantity","data","totalPrice","fecha","producto","precio","cantidad","total","ccyFormat","num","toFixed","calculareTotale","totale","forEach","calculareTotalByRoom","Object","values","sortVentas","sort","a","b","aa","split","reverse","join","bb","SearchBoxProducts","props","style","root","overflow","textOverflow","whiteSpace","right","styleClasses","makeStyles","useStyles","Autocomplete","id","options","menu","getOptionLabel","option","codigo","nombre","onChange","event","value","renderInput","params","TextField","InputLabelProps","classes","label","variant","fullWidth","cleanAutocomplete","SearchBoxRooms","rooms","numero","onChangeRoom","console","log","ventasOrdenadas","setFilasTabla","setVistas","width","marginRight","userStatusSetPermission","callback","getAuth","onAuthStateChanged","user","email","localStorage","permiso","firebaseLogin","password","signInWithEmailAndPassword","credenciales","firebaseLogout","signOut","info","firebaseBuscar","coleccionABuscar","listado","consulta","collection","getFirestore","getDocs","documento","objeto","push","updateProduct","product","firebaseUpdate","updateVenta","coleccion","referencia","doc","updateDoc","createProduct","firebaseCreate","createVenta","uuid","setDoc","removeProduct","firebaseDelete","removeVenta","deleteDoc","getProductsFromFirebase","productos","getVentasFromFirebase","pagarCuenta","AnullareBtn","React","useState","open","setOpen","handleClose","ventaId","className","onClick","Dialog","onClose","DialogTitle","DialogContent","DialogContentText","DialogActions","setVentas","autoFocus","ConfermaBtn","openError","setOpenError","handleClickCloseError","disabled","falstaStampa","prodotto","quantita","camere","prezzo","ventasNuevas","setFaltaStampa","reiniciar","selectedModifyOption","selected","selectedRemoveOption","selectedAddOption","sortProducts","products","PagareBtn","Ventas","useEffect","onLoad","getVentas","getProducts","setMenu","selectedProduct","setSelectedProduct","selectedRoom","setSelectedRoom","quantity","setQuantity","filasTabla","Date","selectedDate","handleDateChange","displayDetalle","setDisplayDetalle","displayVenta","setDisplayVenta","faltaStampa","cleanValue","setCleanValue","history","useHistory","validateUser","pathname","location","state","ventasFb","addQuantity","removeQuantity","utils","DateFnsUtils","locale","deLocale","placeholder","format","mostrarSoloDetalle","camera","prodoto","mywindow","window","document","write","close","focus","PrintElem","display","TableContainer","component","Paper","Table","sx","minWidth","fontSize","TableHead","TableRow","TableCell","align","TableBody","map","row","colSpan","print","Inicio","ventasActivas","ventaActiva","stansasConExtra","prueba","numerosStanzas","getNumerosStanzas","key","Login","usuario","setUsuario","pass","setPass","setItem","JSON","stringify","iniciarSesion","permission","e","target","type","size","Button","SalvaBtn","price","test","optionSelected","setOptionSelected","CancellareBtn","CRMProducts","newName","setNewName","newCodigo","setNewCodigo","newPrice","setNewPrice","limpiarSelectedProduct","updateName","defaultValue","margin","updatePrice","RouterPath","path","exact","App","app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","getAnalytics","firebaseConfig","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.804dd21a.chunk.js","sourcesContent":["export function getDateNow() {\r\n    var today = new Date();\r\n    var dd = String(today.getDate()).padStart(2, '0');\r\n    var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!\r\n    var yyyy = today.getFullYear();\r\n\r\n    today = dd + '/' + mm + '/' + yyyy;\r\n    return today;\r\n}\r\n\r\nexport function formatDate(date) {\r\n    let dia = '';\r\n    if (date.getDate() < 10) {\r\n        dia = '0'+date.getDate();\r\n    } else {\r\n        dia = date.getDate();\r\n    } \r\n    return dia + \"/\" + (date.getMonth() + 1) + \"/\" + (date.getYear() + 1900);\r\n}","import { formatDate } from \"./UtilsDate\";\r\n \r\nexport function getVentasByRoom(numeroRoom, ventas) {\r\n    return ventas.filter( venta => {\r\n       return venta.numeroHabitacion === numeroRoom &&\r\n                !venta.cancelado && !venta.pagado\r\n      });\r\n }\r\n\r\n export function createVentaObjeto(roomNumber, productName, productPrice, productQuantity, data) {\r\n    let totalPrice = productPrice * productQuantity;\r\n     return  {\r\n        numeroHabitacion: roomNumber,\r\n        fecha: formatDate(data),\r\n        producto: productName,\r\n        precio: productPrice,\r\n        cantidad: productQuantity,\r\n        total: totalPrice,\r\n        pagado: false,\r\n        cancelado: false\r\n    }\r\n}\r\n\r\n export function actualizatTabla(tabla)  {\r\n    return tabla.filter(t => !t.pagado);    \r\n }\r\n\r\n export function ccyFormat(num) {\r\n   if (!num) {\r\n      num = 0;\r\n   }\r\n   return `${num.toFixed(2)}`;\r\n }\r\n\r\n export function calculareTotale(ventas) {\r\n   let totale = 0;\r\n   ventas?.forEach( venta =>{\r\n      totale = totale + (venta.precio * venta.cantidad);\r\n   })\r\n   return ccyFormat(totale);\r\n }\r\n\r\n export function calculareTotalByRoom(numeroHabitacion, ventas) {\r\n    let ventasRoom = Object.values(ventas)?.filter(venta => {\r\n       return venta.numeroHabitacion === numeroHabitacion &&\r\n               !venta.pagado  && !venta.cancelado\r\n    })\r\n    return calculareTotale(ventasRoom);\r\n }\r\n\r\nexport function sortVentas(ventas) {\r\n   let ventasSorteades =  ventas.sort((a, b)  =>{\r\n      var aa = a.fecha.split('/').reverse().join();\r\n      var bb = b.fecha.split('/').reverse().join();\r\n      return aa < bb ? -1 : (aa > bb ? 1 : 0);\r\n  });\r\n   return ventasSorteades;\r\n}\r\n\r\nexport function stansasConExtra(ventas) {\r\n   let ventasActivas = [];\r\n   Object.values(ventas)?.filter( venta => !venta.cancelado && !venta.pagado)\r\n         .forEach( venta => {\r\n            let ventaActiva = {camera: venta.numeroHabitacion, totale: venta.total} ;\r\n            ventasActivas.push(ventaActiva);\r\n         } );\r\n   return ventasActivas;\r\n} \r\n\r\nexport function getNumerosStanzas(ventasActivas) {\r\n   let numerosStanzas = [];\r\n   Object.values(ventasActivas)?.forEach( venta =>  {\r\n\r\n      if (!numerosStanzas[venta.camera]) {\r\n         numerosStanzas[venta.camera] = (venta.totale - 0);\r\n      } else {\r\n         numerosStanzas[venta.camera] += ((venta.totale - 0));\r\n      }\r\n   } );\r\n   return numerosStanzas;\r\n} \r\n\r\nexport function getStanzasActivasTotale(ventasActivas, numeroStanza) {\r\n   let stanzasActivasConTotale = [];\r\n   let precio = 0;\r\n   Object.values(numeroStanza)?.forEach( stanza =>  {\r\n      Object.values(ventasActivas)?.filter( venta => venta.numeroHabitacion === stanza)\r\n         .forEach(venta => {\r\n            precio = precio + venta.total;\r\n         });\r\n         let nuovaSanza = {camera: stanza, totale: precio};\r\n         stanzasActivasConTotale.push(nuovaSanza);\r\n         precio = 0; \r\n   } );\r\n   return stanzasActivasConTotale;\r\n} \r\n\r\n\r\n\r\n","import React from 'react';\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { ccyFormat } from '../utils/UtilsVenta';\r\n\r\nconst SearchBoxProducts = (props) => {\r\n  const style = {\r\n    root: {\r\n      overflow: \"hidden\",\r\n      textOverflow: \"ellipsis\",\r\n      whiteSpace: \"nowrap\",\r\n      right: \"52px\"\r\n    }\r\n  };\r\n\r\n  const useStyles = makeStyles(() => ({\r\n    ...style\r\n  }));\r\n  const styleClasses = useStyles();\r\n  return (\r\n    <Autocomplete\r\n      id=\"combo-box-product\"\r\n      key={props.cleanAutocomplete}\r\n      options={props.menu}\r\n      getOptionLabel={option => \".\"+option?.codigo+\" - \"+option.nombre+\" - €\"+ccyFormat(option.precio * 1)}\r\n      onChange={(event, value) => {\r\n        if (value) {\r\n        props.onChange(value);\r\n      }\r\n      }}\r\n      renderInput={params => (\r\n        <TextField\r\n          {...params}\r\n          InputLabelProps={{ classes: styleClasses }}\r\n          label={\r\n            \"Selezionare il prodotto\"\r\n          }\r\n          variant=\"outlined\"\r\n          fullWidth\r\n        />\r\n      )}\r\n    />\r\n  );\r\n}\r\n\r\nexport default SearchBoxProducts;","import React from 'react';\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { getVentasByRoom, sortVentas } from '../utils/UtilsVenta';\r\n\r\nconst SearchBoxRooms = (props) => {\r\n  const style = {\r\n    root: {\r\n      overflow: \"hidden\",\r\n      textOverflow: \"ellipsis\",\r\n      whiteSpace: \"nowrap\",\r\n      right: \"52px\"\r\n    }\r\n  };\r\n\r\n  const useStyles = makeStyles(() => ({\r\n    ...style\r\n  }));\r\n  const styleClasses = useStyles();\r\n  return (\r\n    <Autocomplete\r\n      id=\"combo-box-product\"\r\n      options={props.rooms}\r\n      getOptionLabel={option => option.numero}\r\n      onChange={(event, value) => {\r\n        if (value !== '' && value?.numero ) {\r\n        props.onChangeRoom(value);\r\n        console.log(value.numero);\r\n        let ventasOrdenadas = sortVentas(getVentasByRoom(value.numero, props?.ventas)); \r\n        props.setFilasTabla(ventasOrdenadas);\r\n        props?.setVistas();\r\n      }\r\n      }}\r\n      renderInput={params => (\r\n        <TextField\r\n          {...params}\r\n          InputLabelProps={{ classes: styleClasses }}\r\n          label={\r\n            \"Seleziona la stanza\"\r\n          }\r\n          variant=\"outlined\"\r\n          style = {{width: 200, marginRight: 10}}\r\n        />\r\n      )}\r\n    />\r\n  );\r\n}\r\n\r\nexport default SearchBoxRooms;","const rooms = [\r\n    { numero: '121' },\r\n    { numero: '122' },\r\n    { numero: '124' },\r\n    { numero: '125' },\r\n    { numero: '126' },\r\n    { numero: '127' },\r\n    { numero: '128' },\r\n    { numero: '129' },\r\n    { numero: '130' },\r\n    { numero: '131' },\r\n    { numero: '132' },\r\n    { numero: '133' },\r\n    { numero: '134' },\r\n    { numero: '135' },\r\n    { numero: '136' },\r\n    { numero: '137' },\r\n    { numero: '241' },\r\n    { numero: '242' },\r\n    { numero: '244' },\r\n    { numero: '245' },\r\n    { numero: '246' },\r\n    { numero: '247' },\r\n    { numero: '248' },\r\n    { numero: '249' },\r\n    { numero: '250' },\r\n    { numero: '251' },\r\n    { numero: '252' },\r\n    { numero: '253' },\r\n    { numero: '254' },\r\n    { numero: '255' },\r\n    { numero: '256' },\r\n    { numero: '257' },\r\n    { numero: '01' },\r\n    { numero: '02' },\r\n    { numero: '03' },\r\n    { numero: '04' },\r\n    { numero: '05' },\r\n    { numero: '06' },\r\n    { numero: '07' },\r\n    { numero: '08' },\r\n    { numero: '09' },\r\n    { numero: '10' },\r\n    { numero: '11' },\r\n    { numero: '12' },\r\n    { numero: '13' },\r\n    { numero: '14' },\r\n    { numero: '15' },\r\n    { numero: '16' },\r\n    { numero: '17' },\r\n    { numero: '18' },\r\n    { numero: '19' },\r\n    { numero: '20' }\r\n]\r\n\r\nexport function getRooms() {\r\n    return rooms;\r\n}\r\n\r\n","import { initializeApp } from \"firebase/app\";\r\nimport { getAnalytics } from \"firebase/analytics\";\r\nimport { getAuth, signInWithEmailAndPassword } from \"firebase/auth\"\r\nimport { collection, getDocs, setDoc, getFirestore, doc, deleteDoc, updateDoc } from \"firebase/firestore\";\r\nimport { uuid } from 'uuidv4';\r\nimport { useHistory } from \"react-router\";\r\n\r\n\r\n\r\nexport function firebaseConfig() {\r\n    // Your web app's Firebase configuration\r\n    // For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\n    const firebaseConfig = {\r\n        apiKey: \"AIzaSyCpgGNV-DuaokA47QsU6kxrZagsINKBqHg\",\r\n        authDomain: \"hotel-angelini.firebaseapp.com\",\r\n        projectId: \"hotel-angelini\",\r\n        storageBucket: \"hotel-angelini.appspot.com\",\r\n        messagingSenderId: \"226956277742\",\r\n        appId: \"1:226956277742:web:e36ac27844826fa2e8c0ff\",\r\n        measurementId: \"G-H38NNCFGEF\"\r\n    };\r\n    // Initialize Firebase\r\n    const app = initializeApp(firebaseConfig);\r\n    const analytics = getAnalytics(app);\r\n}\r\n\r\nexport async function userStatusSetPermission(callback) {\r\n    getAuth().onAuthStateChanged(user => {\r\n        if (user) {\r\n            console.log('user logged in', user);\r\n            if (user.email === 'guido@angelini.com' || user.email === 'admin@angelini.com') {\r\n                localStorage.permiso = 1;\r\n            }\r\n            else if (user.email === 'hotel@angelini.com') {\r\n                localStorage.permiso = 0;\r\n            }\r\n        } else {\r\n            console.log('user logged out');\r\n            localStorage.permiso = -1;\r\n        }\r\n        if (callback) {\r\n            callback();\r\n        }\r\n    });\r\n}\r\n\r\nexport function userPermisions(user) {\r\n    if (user) {\r\n        if (user.email === 'guido@angelini.com' || user.email === 'admin@angelini.com') {\r\n            return 1;\r\n        }\r\n        else if (user.email === 'hotel@angelini.com') {\r\n            return 0;\r\n        }\r\n    }\r\n    return -1;\r\n}\r\n\r\n\r\nexport async function firebaseLogin(email, password) {\r\n    try {\r\n        let credenciales = await signInWithEmailAndPassword(getAuth(), email, password);\r\n        console.log(credenciales);\r\n    } catch (e) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n\r\nexport async function firebaseLogout() {\r\n    await getAuth().signOut();\r\n    console.info('user logged off');\r\n}\r\n\r\nasync function firebaseBuscar(coleccionABuscar) {\r\n    let listado = [];\r\n    let consulta = collection(getFirestore(), coleccionABuscar);\r\n    let resultado = await getDocs(consulta);\r\n    resultado.forEach(documento => {\r\n        let objeto = documento.data()\r\n        objeto.id = documento.id;\r\n        listado.push(objeto);\r\n    })\r\n\r\n    return listado;\r\n}\r\n\r\nexport async function updateProduct(product) {\r\n    firebaseUpdate('productos', product);\r\n    console.info(\"Prodotto \" + product.nombre + \" actualizado\");\r\n}\r\n\r\nexport async function updateVenta(venta) {\r\n    firebaseUpdate('ventas', venta);\r\n    console.info(\"Ventas  saldadas\");\r\n}\r\n\r\nasync function firebaseUpdate(coleccion, documento) {\r\n    let referencia = doc(getFirestore(), coleccion, documento.id);\r\n    await updateDoc(referencia, documento);\r\n}\r\n\r\nexport async function createProduct(product) {\r\n    await firebaseCreate('productos', product);\r\n    console.info(\"Prodotto \" + product.nombre + \" guardado\");\r\n}\r\n\r\nexport async function createVenta(venta) {\r\n    await firebaseCreate('ventas', venta);\r\n    console.info(\"Venta realizada\");\r\n}\r\n\r\nasync function firebaseCreate(coleccion, documento) {\r\n    documento.id = uuid();\r\n    let referencia = doc(getFirestore(), coleccion, documento.id);\r\n    await setDoc(referencia, documento);\r\n}\r\n\r\nexport async function removeProduct(product) {\r\n    await firebaseDelete('productos', product);\r\n    console.info(\"Prodotto \" + product.nombre + \" eliminado\");\r\n}\r\n\r\nexport async function removeVenta(venta) {\r\n    await firebaseDelete('ventas', venta);\r\n    console.info(\"Venta  eliminado\");\r\n}\r\n\r\nasync function firebaseDelete(coleccion, documento) {\r\n    let referencia = doc(getFirestore(), coleccion, documento.id);\r\n    await deleteDoc(referencia)\r\n}\r\n\r\n\r\nexport async function getProductsFromFirebase() {\r\n    let productos = await firebaseBuscar('productos');\r\n    return productos;\r\n}\r\n\r\nexport async function getVentasFromFirebase() {\r\n    let productos = await firebaseBuscar('ventas');\r\n    return productos;\r\n}\r\n\r\nexport function getProductsFromDB() {\r\n    return JSON.parse(localStorage.menu);\r\n}\r\n\r\nexport function updateProductsFromDB(newMenu) {\r\n    localStorage.setItem(\"menu\", JSON.stringify(newMenu));\r\n}\r\n\r\nexport function getVentasFromDB() {\r\n    return JSON.parse(localStorage.ventas);\r\n}\r\n\r\nexport function addVentaFromDB(newVenta) {\r\n    let newVentas = getVentasFromDB();\r\n    newVentas.push(newVenta);\r\n    localStorage.setItem(\"ventas\", JSON.stringify(newVentas));\r\n}\r\n\r\nexport async function pagarCuenta(roomNumber, ventas) {\r\n    ventas.filter(venta => venta.numeroHabitacion === roomNumber)\r\n        .filter(venta => venta.pagado === false)\r\n        .filter(venta => venta.cancelado === false)\r\n        .forEach(async venta => {\r\n            venta.pagado = true;\r\n            await updateVenta(venta);\r\n        });\r\n\r\n    return ventas;\r\n}","import React from 'react';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { getVentasByRoom } from '../utils/UtilsVenta';\r\nimport { getVentasFromFirebase, removeVenta } from '../utils/UtilsDB';\r\n\r\n\r\nconst AnullareBtn = (props) => {\r\n\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    console.log(props.ventaId)\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <button className=\"btn x\"\r\n        onClick={(event) => {\r\n          handleClickOpen();\r\n        }}>\r\n      </button>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleClose}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">\r\n          {\"Sei sicuro di voler cancellare questa vendita?\"}\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n            Se si rimuove la vendita non sarà possibile recuperarla\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <button className=\"btn\"\r\n            onClick={async () => {\r\n              await removeVenta(props?.venta);\r\n              let ventas = await getVentasFromFirebase();\r\n              props?.setVentas(ventas);\r\n              props.setFilasTabla(getVentasByRoom(props.venta.numeroHabitacion, ventas));\r\n              handleClose();\r\n            }}>Si</button>\r\n          <button className=\"btn\" onClick={handleClose} autoFocus>\r\n            No\r\n          </button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AnullareBtn;\r\n","import React, { useState } from 'react';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { createVentaObjeto, getVentasByRoom, sortVentas } from '../utils/UtilsVenta';\r\nimport { createVenta, getVentasFromFirebase } from '../utils/UtilsDB';\r\nimport { formatDate } from '../utils/UtilsDate';\r\n\r\n\r\nconst ConfermaBtn = (props) => {\r\n\r\n  const [open, setOpen] = React.useState(false);\r\n  const [openError, setOpenError] = React.useState(false);\r\n\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    console.log(props.ventaId)\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleClickOpenError = () => {\r\n    setOpenError(true);\r\n  };\r\n\r\n  const handleClickCloseError = () => {\r\n    setOpenError(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <button className=\"btn\"\r\n        disabled={ props?.falstaStampa }\r\n        onClick={ async () => {\r\n          if (props?.prodotto !== '-' && props?.quantita > 0 && props?.camere !== 0) {\r\n            let venta = createVentaObjeto(props.camere, props.prodotto, props.prezzo, props.quantita, props.data);\r\n            await createVenta(venta);\r\n            let ventas = await getVentasFromFirebase();\r\n            props?.setVentas(ventas);\r\n            let ventasNuevas = getVentasByRoom(props.camere, ventas);\r\n            let ventasOrdenadas = sortVentas(ventasNuevas);\r\n            props?.setFilasTabla(ventasOrdenadas);\r\n            props?.setFaltaStampa(true);\r\n            props?.reiniciar();\r\n          } else {\r\n            handleClickOpenError();\r\n          }\r\n        }}>\r\n        Conferma\r\n      </button>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleClose}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">\r\n          {\"Sei sicuro di confermare la vendita per la camera \" + props.camere + \"?\"}\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n            Data: {formatDate(props.data)} <br />\r\n            Prodotto: {props.prodotto} <br />\r\n            Quantita: {props.quantita} <br />\r\n            Totale: {props.totale}€ <br />\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <button className=\"btn\"\r\n            onClick={async () => {\r\n              let venta = createVentaObjeto(props.camere, props.prodotto, props.prezzo, props.quantita, props.data);\r\n              await createVenta(venta);\r\n              let ventas = await getVentasFromFirebase();\r\n              props?.setVentas(ventas);\r\n              props?.setFilasTabla(sortVentas(getVentasByRoom(props.camere, ventas)));\r\n              props?.reiniciar();\r\n              handleClose();\r\n            }}>Si</button>\r\n          <button className=\"btn\" onClick={handleClose} autoFocus>\r\n            No\r\n          </button>\r\n        </DialogActions>\r\n      </Dialog>\r\n      <Dialog\r\n          open={openError}\r\n          onClose={handleClickCloseError}\r\n          aria-labelledby=\"alert-dialog-title\"\r\n          aria-describedby=\"alert-dialog-description\"\r\n        >\r\n          <DialogTitle id=\"alert-dialog-title\">\r\n            {\"Error:\"}\r\n          </DialogTitle>\r\n          <DialogContent>\r\n            <DialogContentText id=\"alert-dialog-description\">\r\n            Devi selezionare un prodotto e una quantità maggiore di zero e una stanza.<br />\r\n            </DialogContentText>\r\n          </DialogContent>\r\n          <DialogActions>\r\n\r\n            <button className=\"btn\" onClick={handleClickCloseError} autoFocus>\r\n              Exit\r\n            </button>\r\n          </DialogActions>\r\n        </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ConfermaBtn;\r\n","export function selectedModifyOrRemoveOption(selected) {\r\n    if (selected === 1 || selected === 2) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nexport function selectedModifyOption(selected) {\r\n    if (selected === 1) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nexport function selectedRemoveOption(selected) {\r\n    if (selected === 2) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nexport function selectedAddOption(selected) {\r\n    if (selected === 3) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\n\r\nexport function sortProducts(products) {\r\n    return products.sort(function (a, b) {\r\n        if (a.nombre < b.nombre) { return -1; }\r\n        if (a.nombre > b.nombre) { return 1; }\r\n        return 0;\r\n    })\r\n}\r\n\r\nexport function updateProductById(newProduct, newMenu) {\r\n    newMenu.forEach(product => {\r\n        if (product.id === newProduct.id) {\r\n            product.nombre = newProduct.nombre;\r\n            product.precio = newProduct.precio;\r\n        }\r\n    });\r\n    return newMenu;\r\n}\r\n\r\nexport function removeProductById(id, newMenu) {\r\n    let filteredMenu =\r\n        newMenu.filter(product => product.id !== id);\r\n    return filteredMenu;\r\n}\r\n\r\nexport function addNewProduct(nombre, precio, newMenu) {\r\n    let id = Math.random();\r\n    let producto = {\r\n        id: id,\r\n        nombre: nombre,\r\n        precio: precio\r\n    };\r\n    newMenu.push(producto);\r\n    return newMenu;\r\n}\r\n\r\nexport function validatePrice(price) {\r\n    let priceRGEX =  /^[0-9]{1,4}([.]{1}[0-9]{1,2})?$/;\r\n    let priceResult = priceRGEX.test(price);\r\n    return priceResult;\r\n}","import React, { useState } from 'react';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { calculareTotalByRoom, cancelarVenta, getVentasByRoom, removeVentaFromTable } from '../utils/UtilsVenta';\r\nimport { pagarCuenta } from '../utils/UtilsDB';\r\n\r\n\r\nconst PagareBtn = (props) => {\r\n\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    console.log(props.ventaId)\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <button className=\"btn\"\r\n        onClick={(event) => {\r\n          handleClickOpen();\r\n        }}>\r\n        Incassa\r\n      </button>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleClose}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">\r\n          {\"Vuoi azzerare il conto?\"}\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n            Importo totale: {calculareTotalByRoom(props.numeroHabitacion, props?.ventas)}€\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <button className=\"btn\"\r\n            onClick={async () => {\r\n              let ventas = await pagarCuenta(props?.numeroHabitacion, props?.ventas);\r\n              props.setFilasTabla(getVentasByRoom(props.numeroHabitacion, ventas));\r\n              props.setVentas(ventas);\r\n              handleClose();\r\n            }}>Si</button>\r\n          <button className=\"btn\" onClick={handleClose} autoFocus>\r\n            No\r\n          </button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default PagareBtn;\r\n","import React, { useEffect, useState } from 'react';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport SearchBoxProducts from '../components/SearchBoxProducts';\r\nimport AddIcon from '@material-ui/core/Icon';\r\nimport { addQuantity, removeQuantity } from '../utils/UtilsQuantity';\r\nimport { calculareTotale, ccyFormat } from '../utils/UtilsVenta';\r\nimport SearchBoxRooms from '../components/SearchBoxRooms';\r\nimport { getRooms } from '../utils/UtilsRooms';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport AnullareBtn from '../components/AnullareBtn';\r\nimport ConfermaBtn from '../components/ConfermaBtn';\r\nimport { getProductsFromFirebase, getVentasFromFirebase, userStatusSetPermission } from '../utils/UtilsDB';\r\nimport { KeyboardDatePicker, MuiPickersUtilsProvider } from \"@material-ui/pickers\";\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport deLocale from \"date-fns/locale/it\";\r\nimport { sortProducts } from '../utils/UtilsProducts';\r\nimport PagareBtn from '../components/PagareBtn';\r\nimport { formatDate } from '../utils/UtilsDate'\r\n\r\nconst Ventas = (props) => {\r\n  useEffect(() => {\r\n    onLoad();\r\n    getVentas();\r\n    getProducts();\r\n  }, []);\r\n  const [ventas, setVentas] = useState([]);\r\n  const [menu, setMenu] = useState([]);\r\n  const [selectedProduct, setSelectedProduct] = useState({ nombre: '-', precio: 0 });\r\n  const [selectedRoom, setSelectedRoom] = useState({ numero: 0 });\r\n  const [quantity, setQuantity] = useState(1);\r\n  const [filasTabla, setFilasTabla] = useState([]);\r\n  const [selectedDate, handleDateChange] = useState(new Date());\r\n  const [displayDetalle, setDisplayDetalle] = useState('none');\r\n  const [displayVenta, setDisplayVenta] = useState('none');\r\n  const [openError, setOpenError] = useState(false);\r\n  const [faltaStampa, setFaltaStampa] = useState(true);\r\n  const [cleanValue, setCleanValue] = useState(0);\r\n\r\n  const history = useHistory();\r\n\r\n  function reiniciar() {\r\n    setCleanValue(cleanValue - 2);\r\n    setSelectedProduct({ nombre: '-', precio: 0 });\r\n    setQuantity(1);\r\n  }\r\n\r\n  const onLoad = async () => {\r\n    await userStatusSetPermission(validateUser);\r\n  }\r\n\r\n  const mostrarSoloDetalle = () => {\r\n    setDisplayDetalle('block');\r\n    setDisplayVenta('none');\r\n  }\r\n\r\n  const validateUser = async () => {\r\n    if (localStorage.permiso < 0) {\r\n      console.log(\"Not logged in\");\r\n      history.push({\r\n        pathname: '/',\r\n      });\r\n    }\r\n  }\r\n\r\n  const mostrarTodo = () => {\r\n    setDisplayDetalle('block');\r\n              setDisplayVenta('block');\r\n  };\r\n  \r\n  const handleClickOpenError = () => {\r\n    setOpenError(true);\r\n  };\r\n\r\n  const handleClickCloseError = () => {\r\n    setOpenError(false);\r\n  };\r\n\r\n  const getProducts = async () => {\r\n    if (props?.location?.state?.menu) {\r\n      setMenu(props?.location?.state?.menu);\r\n    } else {\r\n      let productos = await getProductsFromFirebase();\r\n      setMenu(productos);\r\n    }\r\n  }\r\n\r\n  const getVentas = async () => {\r\n    if (props?.location?.state?.ventas) {\r\n      setVentas(props?.location?.state?.ventas);\r\n    } else {\r\n      let ventasFb = await getVentasFromFirebase();\r\n      setVentas(ventasFb);\r\n    }\r\n  }\r\n\r\n  function PrintElem(camera, date, quantity, prodoto)\r\n{\r\n    var mywindow = window.open('', 'PRINT', 'height=400,width=600');\r\n\r\n    mywindow.document.write('<html><head><title> Buono </title>');\r\n    mywindow.document.write('</head><body  style = \"font-size: 18px\" >');\r\n    mywindow.document.write('------------------------------------------<br/>');\r\n    mywindow.document.write('Camera:<b> ' + camera  + ' </b>       Data: <b>' + date  + '</b><br/>');\r\n    mywindow.document.write('------------------------------------------<br/>');\r\n    mywindow.document.write('<b>'+quantity + ' &nbsp; &nbsp; &nbsp; &nbsp; '+ prodoto + '</b><br/>');\r\n    mywindow.document.write('</body></html>');\r\n\r\n    mywindow.document.close(); // necessary for IE >= 10\r\n    mywindow.focus(); // necessary for IE >= 10*/\r\n    setFaltaStampa(false);\r\n    //mywindow.print();\r\n    //mywindow.close();\r\n\r\n    return true;\r\n}\r\n\r\n  return (\r\n    <div className=\"main\">\r\n      <div className=\"container rooms\">\r\n        <SearchBoxRooms\r\n          rooms={getRooms()}\r\n          ventas={ventas}\r\n          onChangeRoom={setSelectedRoom}\r\n          setFilasTabla={setFilasTabla}\r\n          setVistas={mostrarTodo}\r\n        />\r\n        <br />\r\n        <button className=\"btn\"\r\n          onClick={() => {\r\n            history.push({\r\n              pathname: '/inicio',\r\n              state: {\r\n                menu: menu,\r\n                ventas: ventas\r\n              }\r\n            })\r\n          }}>\r\n          Exit\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"container\">\r\n        <SearchBoxProducts\r\n          menu={sortProducts(menu)}\r\n          onChange={setSelectedProduct}\r\n          cleanAutocomplete={cleanValue}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"container\">\r\n        <span className=\"quantity\">{quantity}</span>\r\n        <AddIcon />\r\n        <button className=\"btn circle\"\r\n          onClick={() => {\r\n            setQuantity(addQuantity(quantity));\r\n          }}\r\n        >+</button>\r\n        <button className=\"btn circle\"\r\n          onClick={() => {\r\n            setQuantity(removeQuantity(quantity));\r\n          }}\r\n        >-</button>\r\n      </div>\r\n      <div className=\"container detalle\">\r\n        <table className=\"table-venta\">\r\n          <tr>\r\n            <th>Camera:</th>\r\n            <td>{selectedRoom.numero}</td>\r\n          </tr>\r\n\r\n          <tr>\r\n            <th>Prodotto:</th>\r\n            <td>{selectedProduct.nombre}</td>\r\n          </tr>\r\n\r\n          <tr>\r\n            <th>Prezzo:</th>\r\n            <td>{selectedProduct.precio}€</td>\r\n          </tr>\r\n\r\n          <tr>\r\n            <th>Quantita:</th>\r\n            <td>{quantity}</td>\r\n          </tr>\r\n\r\n          <tr>\r\n            <th>Data:</th>\r\n            <td>\r\n              <MuiPickersUtilsProvider\r\n                utils={DateFnsUtils}\r\n                locale={deLocale}>\r\n                <KeyboardDatePicker\r\n                  value={selectedDate}\r\n                  placeholder=\"10/10/2018\"\r\n                  onChange={date => handleDateChange(date)}\r\n                  format=\"dd/MM/yyyy\"\r\n                />\r\n              </MuiPickersUtilsProvider>\r\n            </td>\r\n          </tr>\r\n\r\n          <tr>\r\n            <th>Totale:</th>\r\n            <td>{ccyFormat(selectedProduct.precio * quantity)}€</td>\r\n          </tr>\r\n        </table>\r\n\r\n        <ConfermaBtn\r\n          camere={selectedRoom.numero}\r\n          prodotto={selectedProduct.nombre}\r\n          prezzo={ccyFormat(selectedProduct.precio * 1)}\r\n          quantita={quantity}\r\n          totale={ccyFormat(selectedProduct.precio * quantity)}\r\n          filasTabla={filasTabla}\r\n          setVentas={setVentas}\r\n          data={selectedDate}\r\n          setFilasTabla={setFilasTabla}\r\n          reiniciar={reiniciar}\r\n          mostrarSoloDetalle={mostrarSoloDetalle}\r\n          falstaStampa={faltaStampa}\r\n          setFaltaStampa={setFaltaStampa}\r\n        />\r\n      <div>\r\n      <button className=\"btn stampa\"\r\n      disabled = {!faltaStampa}\r\n       onClick={() => {\r\n         PrintElem(selectedRoom.numero,\r\n          formatDate(selectedDate),\r\n          quantity,\r\n          selectedProduct.nombre)\r\n      }}>\r\n        Stampa buono\r\n      </button>\r\n      </div>\r\n      </div>\r\n\r\n      <div className=\"containerDetalleVenta\" style={{ display: displayDetalle }}>\r\n        <h2>Extra camera {selectedRoom.numero}</h2>\r\n        <TableContainer component={Paper}>\r\n          <Table sx={{ minWidth: 600, fontSize: 60 }} aria-label=\"spanning table\">\r\n            <TableHead>\r\n\r\n              <TableRow>\r\n                <TableCell width=\"10%\" align=\"center\">Data</TableCell>\r\n                <TableCell width=\"40%\" align=\"left\">Prodotto</TableCell>\r\n                <TableCell width=\"10%\" align=\"right\">Quantita</TableCell>\r\n                <TableCell width=\"20%\" align=\"right\">Prezzo</TableCell>\r\n                <TableCell width=\"20%\" align=\"right\">Totale</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {filasTabla.map((row) => (\r\n                <TableRow key={row.fecha}>\r\n                  <TableCell width=\"10%\">{row.fecha}</TableCell>\r\n                  <TableCell width=\"40%\" align=\"left\">{row.producto}</TableCell>\r\n                  <TableCell width=\"5%\" align=\"right\">{row.cantidad}</TableCell>\r\n                  <TableCell width=\"20%\" align=\"right\">{ccyFormat(row.precio * 1)}€</TableCell>\r\n                  <TableCell width=\"20%\" align=\"right\">{ccyFormat(row.total)} €</TableCell>\r\n                  <TableCell width=\"5%\" align=\"right\" style={{ display: displayVenta }}>{\r\n                    <AnullareBtn\r\n                      venta={row}\r\n                      filasTabla={filasTabla}\r\n                      setFilasTabla={setFilasTabla}\r\n                      setVentas={setVentas}\r\n                    />\r\n                  }</TableCell>\r\n                </TableRow>\r\n              ))}\r\n              <TableRow>\r\n                <TableCell align=\"right\" colSpan={4}>Totale:</TableCell>\r\n                <TableCell align=\"right\">{calculareTotale(filasTabla)} €</TableCell>\r\n              </TableRow>\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <br />\r\n        {localStorage.permiso == 1 &&\r\n          <PagareBtn\r\n            numeroHabitacion={selectedRoom.numero}\r\n            setFilasTabla={setFilasTabla}\r\n            setVentas={setVentas}\r\n            ventas={ventas}\r\n          />}\r\n\r\n        <button className=\"btn\"\r\n          onClick={() => {\r\n            window.print();\r\n          }}>\r\n          Stampa conto\r\n        </button>\r\n        <button className=\"btn\"\r\n          onClick={() => {\r\n            history.push('/inicio')\r\n          }}>\r\n          Exit\r\n        </button>\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nexport default Ventas;\r\n","export function addQuantity(quantity) {\r\n    return quantity + 1;\r\n}\r\n\r\nexport function removeQuantity(quantity) {\r\n    if (quantity === 1) {\r\n        return 1;\r\n    }\r\n    return quantity - 1;\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { firebaseLogout, getProductsFromFirebase, getVentasFromFirebase, userStatus, userStatusSetPermission } from '../utils/UtilsDB';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { ccyFormat, getNumerosStanzas, getStanzasActivasTotale, stansasConExtra } from '../utils/UtilsVenta';\r\n\r\n\r\nconst Inicio = (props) => {\r\n  useEffect(() => {\r\n    onLoad();\r\n    getProducts();\r\n    getVentas();\r\n  }, []);\r\n  const [menu, setMenu] = useState({});\r\n  const [ventas, setVentas] = useState({});\r\n\r\n  const onLoad = async () => {\r\n    await userStatusSetPermission(validateUser);\r\n  }\r\n\r\n  const validateUser = async () => {\r\n    if (localStorage.permiso < 0) {\r\n       console.log(\"Not logged in\"); \r\n       history.push({\r\n        pathname: '/',\r\n        });\r\n    }\r\n  }\r\n\r\n  const getProducts = async () => {\r\n    if (props?.location?.state?.menu) {\r\n      setMenu(props?.location?.state?.menu);\r\n    } else {\r\n      let productos = await getProductsFromFirebase();\r\n      setMenu(productos);\r\n    }\r\n  }\r\n\r\n  const getVentas = async () => {\r\n    if (props?.location?.state?.ventas) {\r\n      setVentas(props?.location?.state?.ventas);\r\n    } else {\r\n      let ventasFb = await getVentasFromFirebase();\r\n      setVentas(ventasFb);\r\n    }\r\n  }\r\n  \r\n  const ventasActivas = stansasConExtra(ventas);\r\n  const prueba = getNumerosStanzas(ventasActivas);\r\n  \r\n  const history = useHistory();\r\n  let permiso = localStorage.permiso;\r\n  return (\r\n    <div>\r\n      <button className=\"btn\" onClick={() => {\r\n        history.push({\r\n          pathname: '/ventas',\r\n          state: {\r\n            menu: menu,\r\n            ventas: ventas\r\n          }\r\n        });\r\n      }}>\r\n        Vendite\r\n      </button>\r\n      {true &&\r\n        <button className=\"btn\" onClick={() => {\r\n          history.push({\r\n            pathname: '/productos',\r\n            state: {\r\n              menu: menu,\r\n              ventas: ventas\r\n            }\r\n          });\r\n        }}>\r\n          Modifica/Aggiungi prodotto\r\n        </button>\r\n      }\r\n\r\n      <button className=\"btn\" onClick={async () => {\r\n        await firebaseLogout();\r\n        history.push('/')\r\n      }}>\r\n        Exit\r\n      </button>\r\n\r\n      <div className=\"container\">\r\n        <h2>Stanze con sospesi</h2>\r\n        <TableContainer component={Paper}>\r\n          <Table style={{ width: 200, fontSize: 60 }} aria-label=\"spanning table\">\r\n            <TableHead>\r\n\r\n              <TableRow>\r\n                <TableCell width=\"10%\" align=\"right\">Stanza</TableCell>\r\n                <TableCell width=\"20%\" align=\"right\">Totale</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {prueba.map((value, key) => (\r\n                <TableRow>\r\n                  <TableCell width=\"10%\" align=\"right\">{key}</TableCell>\r\n                  <TableCell width=\"10%\" align=\"right\">€{ccyFormat(value)}</TableCell>\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <br />\r\n            </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nexport default Inicio;\r\n\r\n\r\n","import React, { useEffect, useState } from 'react';\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport { firebaseLogin, userStatusSetPermission } from '../utils/UtilsDB';\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst Login = () => {\r\n  useEffect(() => {\r\n    onLoad();\r\n  }, []);\r\n  const [usuario, setUsuario] = useState(\"\");\r\n  const [pass, setPass] = useState(\"\");\r\n\r\n  const history = useHistory();\r\n\r\n  const onLoad = async () => {\r\n    await userStatusSetPermission(validateUser);\r\n  }\r\n\r\n  const validateUser = async () => {\r\n    if (localStorage.permiso >= 0) {\r\n       console.log(\"Already logged\"); \r\n       history.push({\r\n        pathname: '/inicio',\r\n        });\r\n    }\r\n  }\r\n\r\n  localStorage.setItem(\"ventas\", JSON.stringify(ventas));\r\n\r\n  const iniciarSesion = async credenciales => {\r\n    let loginCorrecto = await firebaseLogin(credenciales.email, credenciales.password);\r\n    \r\n    if (loginCorrecto) {\r\n      console.log(\"Sesion iniciada correctamente\");\r\n      let permission = 0;\r\n      if (credenciales.email === 'guido@angelini.com' || credenciales.email === 'admin@angelini.com') {\r\n        permission = 1;\r\n      }\r\n      localStorage.permiso = permission;\r\n      history.push({\r\n        pathname: '/inicio',\r\n        state: {permiso: permission}\r\n        });\r\n    }\r\n    else\r\n    {\r\n      localStorage.permiso = -1;\r\n      console.log(\"Usuario o contraseña incorrectos\");\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <div>\r\n        <TextField label=\"Inserisci il nome utente\" onChange={e => setUsuario(e.target.value)} />\r\n        <br />\r\n        <TextField label=\"Inserisci la password\" type=\"password\" size=\"big\" onChange={e => setPass(e.target.value)} />\r\n      </div>\r\n      <div>\r\n        <Button onClick={() => {\r\n          let credenciales = {email: usuario, password: pass};\r\n          iniciarSesion(credenciales);\r\n        }}>\r\n          Avanti\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n\r\nlet ventas = [\r\n  {\r\n    ventaId: '123asd',\r\n    numeroHabitacion: '100',\r\n    fecha: '12/10/2021',\r\n    producto: 'Vodka',\r\n    precio: '12',\r\n    cantidad: 2,\r\n    total: 24,\r\n    pagado: false,\r\n    cancelado: false\r\n  },\r\n  {\r\n    ventaId: '323dsd',\r\n    numeroHabitacion: '100',\r\n    fecha: '12/10/2021',\r\n    producto: 'Vodka',\r\n    precio: '12',\r\n    cantidad: 2,\r\n    total: 24,\r\n    pagado: false,\r\n    cancelado: true\r\n  },\r\n  {\r\n    ventaId: '123zxc',\r\n    numeroHabitacion: '101',\r\n    fecha: '12/10/2021',\r\n    producto: 'Fernet',\r\n    precio: '5',\r\n    cantidad: 10,\r\n    total: 50,\r\n    pagado: false,\r\n    cancelado: false\r\n  }\r\n]","import React from 'react';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { createProduct, getProductsFromFirebase, updateProduct } from '../utils/UtilsDB';\r\nimport { selectedAddOption, selectedModifyOption, validatePrice } from '../utils/UtilsProducts';\r\n\r\n\r\nconst SalvaBtn = (props) => {\r\n\r\n  const [open, setOpen] = React.useState(false);\r\n  const [openError, setOpenError] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n\r\n  const handleClickOpenError = () => {\r\n    setOpenError(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleCloseError = () => {\r\n    setOpenError(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <button className=\"btn\"\r\n        onClick={(event) => {\r\n          let precioValido = validatePrice(props?.producto?.precio);\r\n          if (precioValido) {\r\n            handleClickOpen();\r\n          } else {\r\n            handleClickOpenError();\r\n          }\r\n        }}>\r\n        Salva\r\n      </button>\r\n      <Dialog\r\n          open={openError}\r\n          onClose={handleClose}\r\n          aria-labelledby=\"alert-dialog-title\"\r\n          aria-describedby=\"alert-dialog-description\"\r\n        >\r\n          <DialogTitle id=\"alert-dialog-title\">\r\n            {\"Error:\"}\r\n          </DialogTitle>\r\n          <DialogContent>\r\n            <DialogContentText id=\"alert-dialog-description\">\r\n            il prezzo del prodotto dovrebbe avere solo numeri, punto e basta. <br />\r\n            </DialogContentText>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            \r\n            <button className=\"btn\" onClick={handleCloseError} autoFocus>\r\n              Ritorno\r\n            </button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      {selectedModifyOption(props.optionSelected) && (\r\n        <Dialog\r\n          open={open}\r\n          onClose={handleClose}\r\n          aria-labelledby=\"alert-dialog-title\"\r\n          aria-describedby=\"alert-dialog-description\"\r\n        >\r\n          <DialogTitle id=\"alert-dialog-title\">\r\n            {\"Siete sicuri di modificare il prodotto con questi nuovi valori:\"}\r\n          </DialogTitle>\r\n          <DialogContent>\r\n            <DialogContentText id=\"alert-dialog-description\">\r\n              Codigo: {props.producto.codigo} <br />\r\n              Nome: {props.producto.nombre} <br />\r\n              Prezzo: {props.producto.precio} <br />\r\n            </DialogContentText>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <button className=\"btn\"\r\n              onClick={async () => {\r\n                await updateProduct(props?.producto);\r\n                let menu = await getProductsFromFirebase();\r\n                props.setMenu(menu);\r\n                props.reiniciar();\r\n                props.setOptionSelected(0);\r\n                handleClose();\r\n              }}>Confermare</button>\r\n            <button className=\"btn\" onClick={handleClose} autoFocus>\r\n              Ritorno\r\n            </button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      )}\r\n      {selectedAddOption(props.optionSelected) && (\r\n        <Dialog\r\n          open={open}\r\n          onClose={handleClose}\r\n          aria-labelledby=\"alert-dialog-title\"\r\n          aria-describedby=\"alert-dialog-description\"\r\n        >\r\n          <DialogTitle id=\"alert-dialog-title\">\r\n            {\"Sei sicuro di aggiungere il seguente prodotto:\"}\r\n          </DialogTitle>\r\n          <DialogContent>\r\n            <DialogContentText id=\"alert-dialog-description\">\r\n              Codigo: {props.producto.codigo} <br />\r\n              Nome: {props.producto.nombre} <br />\r\n              Prezzo: {props.producto.precio} <br />\r\n            </DialogContentText>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <button className=\"btn\"\r\n              onClick={ async () => {\r\n                let producto = {nombre: props.producto.nombre, precio: props.producto.precio, codigo: props.producto.codigo};\r\n                await createProduct(producto);\r\n                let menu = await getProductsFromFirebase();\r\n                props.setMenu(menu);\r\n                props.reiniciar();\r\n                props.setOptionSelected(0);\r\n                handleClose();\r\n              }}>Confermare</button>\r\n            <button className=\"btn\" onClick={handleClose} autoFocus>\r\n              Ritorno\r\n            </button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      )}\r\n      <button className=\"btn\" onClick={() => {\r\n        props.reiniciar();\r\n        props.setOptionSelected(0);\r\n      }}>\r\n        Exit\r\n      </button>\r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nexport default SalvaBtn;\r\n","import React from 'react';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { getProductsFromFirebase, removeProduct } from '../utils/UtilsDB';\r\n\r\n\r\nconst CancellareBtn = (props) => {\r\n\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    console.log(props.ventaId)\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <button className=\"btn\"\r\n        onClick={(event) => {\r\n          handleClickOpen();\r\n        }}>\r\n        Cancellare\r\n      </button>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleClose}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">\r\n          {\"Sei sicuro di eliminare il seguente prodotto:\"}\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n            Nome: {props.producto.nombre} <br />\r\n            Prezzo: {props.producto.precio} <br />\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <button className=\"btn\"\r\n            onClick={async () => {\r\n              await removeProduct(props?.producto);\r\n              let menu = await getProductsFromFirebase();\r\n              props.setMenu(menu);\r\n              props.reiniciar();\r\n              props.setOptionSelected(0);\r\n              handleClose();\r\n            }}>Confermare</button>\r\n          <button className=\"btn\" onClick={handleClose} autoFocus>\r\n            Ritorno\r\n          </button>\r\n        </DialogActions>\r\n      </Dialog>\r\n      <button className=\"btn\" onClick={() => {\r\n        props.reiniciar();\r\n        props.setOptionSelected(0);\r\n      }}>\r\n        Exit\r\n      </button>\r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nexport default CancellareBtn;\r\n","import React, { useState, useEffect } from 'react';\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport SearchBoxProducts from '../components/SearchBoxProducts';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { selectedAddOption, selectedModifyOption, selectedModifyOrRemoveOption, selectedRemoveOption, sortProducts } from '../utils/UtilsProducts';\r\nimport SalvaBtn from '../components/SalvaBtn';\r\nimport CancellareBtn from '../components/CancellareBtn';\r\nimport { getProductsFromFirebase, getVentasFromFirebase, userStatusSetPermission } from '../utils/UtilsDB';\r\n\r\nconst CRMProducts = (props) => {\r\n  useEffect(()=>{\r\n    onLoad();\r\n    getProducts();\r\n    getVentas();\r\n  },[]);\r\n  const [menu, setMenu] = useState([]);\r\n  const [ventas, setVentas] = useState([]);\r\n  const [selectedProduct, setSelectedProduct] = useState({ id: '', nombre: '', precio: 0 });\r\n  const [newName, setNewName] = useState('');\r\n  const [newCodigo, setNewCodigo] = useState('');\r\n  const [newPrice, setNewPrice] = useState(0);\r\n  const [optionSelected, setOptionSelected] = useState(0);\r\n\r\n  const onLoad = async () => {\r\n    await userStatusSetPermission(validateUser);\r\n  }\r\n\r\n  const validateUser = async () => {\r\n    if (localStorage.permiso < 0) {\r\n       console.log(\"Not logged in\"); \r\n       history.push({\r\n        pathname: '/',\r\n        });\r\n    }\r\n  }\r\n\r\n  const getProducts = async () => {\r\n    if (props?.location?.state?.menu) {\r\n      setMenu(props?.location?.state?.menu);\r\n    } else {\r\n    let productos = await getProductsFromFirebase();\r\n    setMenu(productos);\r\n    }\r\n  }  \r\n\r\n  const getVentas = async () => {\r\n    if (props?.location?.state?.ventas) {\r\n      setVentas(props?.location?.state?.ventas);\r\n    }\r\n  }  \r\n\r\n  const history = useHistory();\r\n\r\n  const updateName = (nombre) => {\r\n    let producto = { id: selectedProduct.id, nombre: nombre, precio: selectedProduct.precio };\r\n    setSelectedProduct(producto);\r\n  }\r\n\r\n  const updatePrice = (precio) => {\r\n    let producto = { id: selectedProduct.id, nombre: selectedProduct.nombre, precio: precio };\r\n    setSelectedProduct(producto);\r\n  }\r\n\r\n  const reiniciar = () => {\r\n    setSelectedProduct({ id: '', nombre: '', precio: 0 });\r\n    setOptionSelected(0);\r\n  }\r\n\r\n  const limpiarSelectedProduct = () => {\r\n    setSelectedProduct({ id: '', nombre: '', precio: 0 });\r\n  }\r\n\r\n  return (\r\n    <div className=\"main\">\r\n      <div className=\"container\">\r\n        <h2>Seleziona un'opzione</h2>\r\n        <button className=\"btn\" onClick={() => {\r\n          setOptionSelected(1);\r\n          limpiarSelectedProduct();\r\n        }}>\r\n          Modifica prodotto\r\n        </button>\r\n        <button className=\"btn\" onClick={() => {\r\n          setOptionSelected(2);\r\n          limpiarSelectedProduct();\r\n        }}>\r\n          Elimina prodotto\r\n        </button>\r\n        <button className=\"btn\" onClick={() => {\r\n          setOptionSelected(3);\r\n          limpiarSelectedProduct();\r\n        }}>\r\n          Aggiungi prodotto\r\n        </button>\r\n\r\n        <button className=\"btn\" onClick={() => {\r\n          setOptionSelected(0);\r\n          if (props?.location?.state?.ventas) {\r\n          history.push({\r\n            pathname: '/inicio',\r\n            state: {\r\n                    menu: menu,\r\n                    ventas: ventas\r\n                   }\r\n            })\r\n        } else {\r\n          history.push({\r\n            pathname: '/inicio',\r\n            state: {\r\n                    menu: menu\r\n                   }\r\n            })\r\n        }}}>\r\n          Exit\r\n        </button>\r\n      </div>\r\n      {\r\n        (selectedModifyOrRemoveOption(optionSelected)) &&\r\n        <div className=\"container\">\r\n          <h2>Seleziona il prodotto</h2>\r\n          <SearchBoxProducts menu={sortProducts(menu)} onChange={setSelectedProduct} />\r\n        </div>\r\n      }\r\n      {\r\n        selectedProduct.nombre !== '' && selectedModifyOption(optionSelected) &&\r\n        <div className=\"container\">\r\n          <h2>Cambia nome o prezzo</h2>\r\n          <TextField fullWidth\r\n            className=\"textBoxProducts\"\r\n            onChange={e => updateName(e.target.value)}\r\n            label=\"Nome\"\r\n            defaultValue={selectedProduct.nombre}\r\n            value={selectedProduct.nombre}\r\n            margin=\"normal\"\r\n          /> <br />\r\n          <TextField\r\n            className=\"textBoxProducts\"\r\n            onChange={e => updatePrice(e.target.value)}\r\n            label=\"Prezzo\"\r\n            defaultValue={selectedProduct.precio}\r\n            value={selectedProduct.precio}\r\n            margin=\"normal\"\r\n          />\r\n          <br /><br />\r\n          <SalvaBtn\r\n            producto={selectedProduct}\r\n            setMenu={setMenu}\r\n            menu={menu}\r\n            reiniciar={reiniciar}\r\n            setOptionSelected={setOptionSelected}\r\n            optionSelected={optionSelected}\r\n          />\r\n        </div>\r\n      }\r\n      {\r\n        selectedProduct.nombre !== '' && selectedRemoveOption(optionSelected) &&\r\n        <div className=\"container\">\r\n          <h2>Vuoi cancellare il prodotto:</h2> <br />\r\n          {selectedProduct.nombre}\r\n          <br /><br />\r\n          <CancellareBtn\r\n            producto={selectedProduct}\r\n            setMenu={setMenu}\r\n            menu={menu}\r\n            reiniciar={reiniciar}\r\n            setOptionSelected={setOptionSelected}\r\n            optionSelected={optionSelected}\r\n          />\r\n        </div>\r\n      }\r\n      {\r\n        selectedAddOption(optionSelected) &&\r\n        <div className=\"container\">\r\n          <h2>Inserisci i dettagli del prodotto che vuoi aggiungere:</h2> <br />\r\n          <TextField label=\"Nome del prodotto\" onChange={e => setNewName(e.target.value)} />\r\n          <br />\r\n          <TextField label=\"Prezzo del prodotto\" onChange={e => setNewPrice(e.target.value)} />\r\n          <br />\r\n          <TextField label=\"Codigo del prodotto\" onChange={e => setNewCodigo(e.target.value)} />\r\n          <br />\r\n          <br />\r\n          <SalvaBtn\r\n            producto={{ nombre: newName, precio: newPrice, codigo: newCodigo }}\r\n            setMenu={setMenu}\r\n            menu={menu}\r\n            reiniciar={reiniciar}\r\n            setOptionSelected={setOptionSelected}\r\n            optionSelected={optionSelected}\r\n          />\r\n        </div>\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CRMProducts;","import React from 'react';\r\nimport { HashRouter as Router, Route, Switch } from 'react-router-dom';\r\nimport Ventas from './pages/Ventas';\r\nimport Inicio from './pages/Inicio';\r\nimport Login from './pages/Login';\r\nimport CRMProducts from './pages/CRMProducts';\r\n\r\n\r\nconst RouterPath = (props) => {\r\n\r\nreturn (\r\n    <Router>\r\n      <Switch>\r\n\r\n        {/* <Route path='/admin' exact={true} component={Admin} /> */}\r\n        <Route path='/' exact={true} component={Login} />\r\n        <Route path='/ventas' exact={true} component={Ventas} />\r\n        <Route path='/inicio' exact={true} component={Inicio} />\r\n        <Route path='/productos' exact={true} component={CRMProducts} />\r\n\r\n\r\n      </Switch>\r\n    </Router>\r\n  )\r\n}\r\n\r\nexport default RouterPath;","import './App.css';\nimport RouterPath from './RouterPath';\nimport { firebaseConfig } from './utils/UtilsDB';\n\nfunction App() {\n  firebaseConfig();\n  return (\n      <RouterPath />\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}